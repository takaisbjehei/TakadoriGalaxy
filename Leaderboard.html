<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Leaderboard - TakaGalaxy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: white;
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }

    .fade-in {
      animation: fadeIn 0.8s ease forwards;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .glow-gold {
      box-shadow: 0 0 10px #facc15, 0 0 20px #facc15;
    }
    .glow-silver {
      box-shadow: 0 0 10px #cbd5e1, 0 0 20px #cbd5e1;
    }
    .glow-bronze {
      box-shadow: 0 0 10px #f97316, 0 0 20px #f97316;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center relative p-4">

  <!-- üîô Back to Home -->
  <a href="home.html" class="absolute top-4 left-4 bg-slate-800 hover:bg-slate-700 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 transition-all duration-300">
    <i class="fas fa-arrow-left"></i> Back to Home
  </a>

  <!-- Leaderboard Container -->
  <div class="fade-in w-full max-w-3xl p-6 bg-slate-900/80 backdrop-blur-md rounded-2xl shadow-2xl">
    <h1 class="text-4xl font-extrabold text-center mb-8 text-indigo-300 drop-shadow">üèÜ TakaGalaxy Leaderboard</h1>
    
    <ul id="leaderboardList" class="space-y-5">
      <!-- Leaderboard items injected here -->
    </ul>

    <div class="text-center mt-8 text-sm text-slate-400" id="loadingText">
      <i class="fas fa-sync-alt animate-spin"></i> Loading leaderboard...
    </div>
  </div>

  <script>
    const supabaseUrl = 'https://vmronlbzksuiikspvlvz.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZtcm9ubGJ6a3N1aWlrc3B2bHZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5ODMwNTcsImV4cCI6MjA2NTU1OTA1N30.WMKbpJn1aavkwQDmsYq_-4EMSLL9tc4LexpmRSCsmSM';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    const leaderboardList = document.getElementById("leaderboardList");
    const loadingText = document.getElementById("loadingText");

    async function loadLeaderboard() {
      const { data, error } = await supabase
        .from('leaderboard')
        .select('*')
        .limit(10);

      loadingText.style.display = "none";

      if (error || !data.length) {
        leaderboardList.innerHTML = `<li class="text-center text-red-400">Unable to load leaderboard üò¢</li>`;
        return;
      }

      leaderboardList.innerHTML = '';

      data.forEach((user, index) => {
        let glowClass = '';
        let border = '';
        let badge = '';

        if (index === 0) {
          glowClass = 'glow-gold';
          badge = 'ü•á';
        } else if (index === 1) {
          glowClass = 'glow-silver';
          badge = 'ü•à';
        } else if (index === 2) {
          glowClass = 'glow-bronze';
          badge = 'ü•â';
        }

        leaderboardList.innerHTML += `
          <li class="flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-slate-800 to-slate-700 hover:from-indigo-800 hover:to-indigo-700 transition-all duration-300 transform hover:scale-[1.02] shadow-md ${glowClass}">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-inner">
                ${user.username.charAt(0).toUpperCase()}
              </div>
              <div>
                <div class="text-lg font-semibold">${badge} ${user.username}</div>
                <div class="text-sm text-slate-300">${user.rank || 'üå± Newbie'} ‚Ä¢ ${user.status}</div>
              </div>
            </div>
            <div class="text-right text-indigo-200 font-bold text-xl">${user.xp} XP</div>
          </li>
        `;
      });
    }

    loadLeaderboard();
  </script>
</body>
</html>
