<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TAKA AI Chat</title>
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="favicon.ico">
  <style>
    * {
      scroll-behavior: smooth;
    }
    .thinking::after {
      content: ' .';
      animation: dots 1.2s steps(1, end) infinite;
    }
    @keyframes dots {
      0% { content: ' .'; }
      33% { content: ' ..'; }
      66% { content: ' ...'; }
      100% { content: ' .'; }
    }
    .sun-moon {
      transition: transform 1s ease, background 1s ease;
    }
    .toggle-rotate {
      transform: rotate(360deg);
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white">
  <div class="max-w-xl mx-auto p-4">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-3xl font-bold">TAKA AI</h1>
      <button id="toggleTheme" class="sun-moon text-2xl">ğŸŒ</button>
    </div>
    <div class="mb-2">
      <label for="mode" class="block mb-1 font-medium">Select Mode:</label>
      <select id="mode" class="w-full p-2 rounded border dark:bg-gray-800">
        <option value="roast">Roast Mode x3000</option>
        <option value="takabhai">Taka Bhai Mode</option>
        <option value="sadboi">Sadboi Mode</option>
        <option value="flirt">Flirt Mode</option>
        <option value="dadjoke">Dad Joke Mode</option>
        <option value="wholesome">Wholesome Mode</option>
      </select>
    </div>
    <div id="chatbox" class="bg-white dark:bg-gray-800 p-4 rounded h-[60vh] overflow-y-auto space-y-2 shadow-md"></div>
    <div class="mt-4 flex">
      <input id="userInput" type="text" class="flex-grow p-2 rounded-l border dark:bg-gray-700" placeholder="Ask something..." />
      <button onclick="sendMessage()" class="bg-blue-600 text-white px-4 rounded-r">Send</button>
    </div>
  </div>
  <script>
    const chatbox = document.getElementById("chatbox");
    const userInput = document.getElementById("userInput");
    const modeSelect = document.getElementById("mode");
    const themeBtn = document.getElementById("toggleTheme");const modeIntro = {
  roast: "Roast Mode x3000 activated. Buckle up, snowflake. â˜„ï¸",
  takabhai: "Taka Bhai Mode: Kya haal hai mere bhai? ğŸ’ª",
  sadboi: "Sadboi Mode: Lifeâ€™s pain. Ask something deep. ğŸ˜”",
  flirt: "Flirt Mode: Hey cutie ğŸ‘€, whatâ€™s on your mind?",
  dadjoke: "Dad Joke Mode: Time for cringe levels over 9000! ğŸ¤“",
  wholesome: "Wholesome Mode: Sending you hugs and hope ğŸŒˆğŸ’–"
};

let chatHistory = [];

function addMessage(sender, text) {
  const bubble = document.createElement("div");
  bubble.className = `p-2 rounded shadow max-w-[80%] ${sender === 'user' ? 'bg-blue-500 text-white self-end ml-auto' : 'bg-gray-200 dark:bg-gray-700 text-black dark:text-white self-start'}`;
  bubble.innerHTML = text;
  chatbox.appendChild(bubble);
  chatbox.scrollTop = chatbox.scrollHeight;
}

function showThinking() {
  const thinking = document.createElement("div");
  thinking.id = "thinking";
  thinking.className = "thinking text-sm text-gray-500";
  thinking.textContent = "TAKA AI is thinking";
  chatbox.appendChild(thinking);
  chatbox.scrollTop = chatbox.scrollHeight;
}

function removeThinking() {
  const thinking = document.getElementById("thinking");
  if (thinking) thinking.remove();
}

async function sendMessage() {
  const message = userInput.value.trim();
  if (!message) return;
  addMessage("user", message);
  userInput.value = "";
  showThinking();
  const mode = modeSelect.value;

  if (/fuck|sex|nude|porn|suck|boobs/i.test(message)) {
    removeThinking();
    addMessage("ai", `âš ï¸ Whoa there, buddy. This isnâ€™t *that* kind of website. Try being less weird. ğŸ˜`);
    return;
  }

  try {
    const response = await fetch("https://llm.chutes.ai/v1", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer cpk_c8adcf5e163e46a1ae61782a72e6f36b.2fe6509bc2a35be39e98a9a6f4b42a5b.ftzjgQW9VwL0nFdZkXBGdHDUi6NsAEAJ"
      },
      body: JSON.stringify({
        model: "google/gemini-2.0-flash-exp:free",
        messages: [
          { role: "system", content: `You're TAKA AI, assistant of Taka (your creator). Mode: ${mode}. Keep it chill, funny, and responsive.` },
          ...chatHistory,
          { role: "user", content: message }
        ]
      })
    });

    const result = await response.json();
    removeThinking();
    const reply = result.choices?.[0]?.message?.content || "Sorry, I glitched out.";
    chatHistory.push({ role: "user", content: message });
    chatHistory.push({ role: "assistant", content: reply });
    addMessage("ai", reply);

    // Random fun fact
    if (Math.random() < 0.2) {
      const fact = [
        "TAKA once roasted an entire database. It still hasnâ€™t recovered.",
        "TAKA is powered by pure chaos and leftover noodles.",
        "TAKAâ€™s sarcasm level is certified hazardous.",
        "TAKA can run faster than a 404 error.",
        "TAKA once made a potato cry."
      ];
      addMessage("ai", `ğŸ¤– TAKA FACT: ${fact[Math.floor(Math.random() * fact.length)]}`);
    }
  } catch (err) {
    removeThinking();
    addMessage("ai", "I had a mental crash. Probably your fault. Try again?");
  }
}

// Theme toggle
themeBtn.addEventListener("click", () => {
  document.documentElement.classList.toggle("dark");
  themeBtn.classList.add("toggle-rotate");
  setTimeout(() => themeBtn.classList.remove("toggle-rotate"), 1000);
  themeBtn.textContent = document.documentElement.classList.contains("dark") ? "ğŸŒ™" : "ğŸŒ";
});

// Enter to send
userInput.addEventListener("keydown", e => {
  if (e.key === "Enter") sendMessage();
});

// Intro greeting
window.onload = () => {
  const selectedMode = modeSelect.value;
  addMessage("ai", modeIntro[selectedMode]);
};

  </script>
</body>
</html>
