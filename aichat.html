<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TAKA AI Chat</title>
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
    }
    .bubble {
      max-width: 80%;
      padding: 10px 15px;
      border-radius: 1rem;
      margin-bottom: 5px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .user-bubble {
      background-color: #3b82f6;
      color: white;
      margin-left: auto;
      border-bottom-right-radius: 0;
    }
    .bot-bubble {
      background-color: #e5e7eb;
      color: black;
      margin-right: auto;
      border-bottom-left-radius: 0;
      position: relative;
    }
    .typing {
      font-style: italic;
      color: #9ca3af;
      margin-left: 5px;
    }
    .mode-selector {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 999;
    }
    .mode-btn {
      padding: 6px 12px;
      margin: 2px;
      border-radius: 6px;
      background: #4b5563;
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .mode-btn:hover {
      background: #1f2937;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white transition-colors">
  <div class="max-w-xl mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4 text-center">ü§ñ TAKA AI</h1><div class="mode-selector">
  <button class="mode-btn" onclick="setMode('default')">Normal</button>
  <button class="mode-btn" onclick="setMode('roast')">Roast x3000</button>
  <button class="mode-btn" onclick="setMode('flirt')">Flirt (Taka Girl)</button>
  <button class="mode-btn" onclick="setMode('sarcastic')">Sarcastic</button>
  <button class="mode-btn" onclick="setMode('dark')">Dark Humor</button>
</div>

<div id="chatbox" class="space-y-2 p-4 bg-white dark:bg-gray-800 rounded-lg h-[450px] overflow-y-auto shadow-inner"></div>

<div class="mt-4 flex">
  <input id="userInput" type="text" placeholder="Ask TAKA AI anything..."
    class="flex-1 px-4 py-2 rounded-l-lg border dark:bg-gray-700 dark:border-gray-600" />
  <button onclick="sendMessage()"
    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-lg">Send</button>
</div>

  </div>  <script>
    const chatbox = document.getElementById("chatbox");
    const userInput = document.getElementById("userInput");
    const CHUTES_API_TOKEN = "cpk_c8adcf5e163e46a1ae61782a72e6f36b.2fe6509bc2a35be39e98a9a6f4b42a5b.ftzjgQW9VwL0nFdZkXBGdHDUi6NsAEAJ";
    let chatHistory = [];
    let currentMode = "default";

    function setMode(mode) {
      currentMode = mode;
      addBubble("TAKA AI", `Switched to ${mode.replace(/x3000/, 'x3000 üöÄ')} mode!`, "bot");
    }

    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;

      // Check for inappropriate content
      if (/nude|sex|horny|boobs|nsfw/i.test(message)) {
        addBubble("TAKA AI", "Whoa üòí... Taka AI doesn‚Äôt vibe with that. Keep it chill or face the Roast x3000!", "bot");
        userInput.value = "";
        return;
      }

      addBubble("You", message, "user");
      chatHistory.push({ role: "user", content: message });
      userInput.value = "";
      chatbox.scrollTop = chatbox.scrollHeight;

      const typingDiv = document.createElement("div");
      typingDiv.id = "typing";
      typingDiv.className = "typing";
      typingDiv.innerText = "TAKA AI is thinking...";
      chatbox.appendChild(typingDiv);
      chatbox.scrollTop = chatbox.scrollHeight;

      const systemPrompts = {
        default: "You are TAKA AI, a loyal assistant built by your master Taka. Be helpful, respectful, and witty. Add random TAKA FACTS occasionally.",
        roast: "You are TAKA AI Roast Mode x3000. You roast users hilariously but don‚Äôt be truly offensive.",
        flirt: "You are TAKA AI but in a flirty playful girl mood. Respond like a fun, teasing AI girlfriend.",
        sarcastic: "You are TAKA AI Sarcastic Mode. You reply sarcastically to every question, but keep it fun.",
        dark: "You are TAKA AI Dark Mode. Respond with dark jokes and twisted humor but avoid anything illegal or cruel."
      };

      try {
        const res = await fetch("https://llm.chutes.ai/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": "Bearer " + CHUTES_API_TOKEN,
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "deepseek-ai/DeepSeek-V3-0324",
            messages: [
              { role: "system", content: systemPrompts[currentMode] },
              ...chatHistory
            ],
            stream: false,
            max_tokens: 1024,
            temperature: 0.8
          })
        });

        document.getElementById("typing")?.remove();
        const data = await res.json();
        const reply = data.choices?.[0]?.message?.content || "‚ö†Ô∏è TAKA AI didn‚Äôt respond.";
        chatHistory.push({ role: "assistant", content: reply });
        typeEffect(reply);

        // Sometimes drop a TAKA FACT
        if (Math.random() < 0.3) {
          const facts = [
            "TAKA once debugged 99 bugs in a single night.",
            "TAKA AI‚Äôs sarcasm is measured in megatons.",
            "If you say 'lag', TAKA fixes it just by looking at it.",
            "TAKA was born when JavaScript met anime."
          ];
          typeEffect("‚ú® TAKA FACT: " + facts[Math.floor(Math.random() * facts.length)]);
        }

      } catch (err) {
        document.getElementById("typing")?.remove();
        addBubble("TAKA AI", "üí• My brain crashed harder than your Wi-Fi.", "bot");
      }
    }

    function addBubble(sender, text, type) {
      const bubble = document.createElement("div");
      bubble.className = `bubble ${type === "user" ? "user-bubble" : "bot-bubble"}`;
      bubble.innerText = text;
      chatbox.appendChild(bubble);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    function typeEffect(text) {
      const bubble = document.createElement("div");
      bubble.className = `bubble bot-bubble`;
      chatbox.appendChild(bubble);
      let i = 0;
      const interval = setInterval(() => {
        bubble.innerText = text.slice(0, i++);
        chatbox.scrollTop = chatbox.scrollHeight;
        if (i > text.length) clearInterval(interval);
      }, 20);
    }

    // Add to home screen
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script></body>
</html>
