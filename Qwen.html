<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TAKA AI – Qwen3‑30B Chat</title>
  <style>
    body { font-family: sans-serif; background: #121212; color: #eee; margin:0; display:flex; flex-direction:column; height:100vh; }
    #chat { flex:1; padding:16px; overflow-y:auto; }
    .msg { margin:8px 0; }
    .user { color:#6cf; }
    .bot { color:#fc6; }
    #input { display:flex; }
    #inputBox { flex:1; padding:12px; border:none; background:#222; color:#eee; }
    #sendBtn { padding:12px 16px; background:#28a745; border:none; color:#fff; cursor:pointer; }
    .dots::after { content:''; animation:dots 1s steps(4,end) infinite; }
    @keyframes dots { to { content:'...'; } }
  </style>
</head>
<body>
  <div id="chat"></div>
  <div id="input">
    <input id="inputBox" placeholder="Talk to TAKA AI..." />
    <button id="sendBtn">Send</button>
  </div>
  <script>
    const API_KEY = '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';
    const MODEL = 'qwen/qwen3-30b-a3b:free';
    const URL = 'https://openrouter.ai/api/v1/chat/completions';
    const chat = document.getElementById('chat');
    document.getElementById('sendBtn').onclick = send;
    document.getElementById('inputBox').onkeydown = e => { if (e.key==='Enter') send(); };

    let conv = [{ role:'system', content:'You are TAKA AI, a smart, chill chatbot with personality.' }];

    function append(role, text) {
      const d = document.createElement('div');
      d.className = 'msg ' + (role==='user'? 'user':'bot');
      d.textContent = (role==='user'? 'You: ' : 'TAKA AI: ') + text;
      chat.appendChild(d);
      chat.scrollTop = chat.scrollHeight;
    }

    async function send() {
      const t = document.getElementById('inputBox').value.trim();
      if (!t) return;
      append('user', t);
      conv.push({ role:'user', content:t });
      document.getElementById('inputBox').value = '';

      const loading = document.createElement('div');
      loading.className = 'msg bot dots';
      loading.textContent = 'TAKA AI is thinking';
      chat.appendChild(loading);
      chat.scrollTop = chat.scrollHeight;

      try {
        const res = await fetch(URL, {
          method:'POST',
          headers:{ 'Authorization':`Bearer ${API_KEY}`, 'Content-Type':'application/json' },
          body: JSON.stringify({ model:MODEL, messages:conv, stream:false })
        });
        const js = await res.json();
        const reply = js.choices?.[0]?.message?.content || '[No response]';
        conv.push({ role:'assistant', content:reply });
        loading.textContent = 'TAKA AI: ' + reply;
      } catch(e) {
        loading.textContent = 'TAKA AI: Ooops! Something went wrong.';
      }
    }
  </script>
</body>
</html>
